import{B as e,n as a,y as l,A as t,m as o,p as s,o as r,u,O as d,P as n,h as p}from"./element-plus.795748f2.js";import{_ as m,u as i}from"./index.3a6602e1.js";import{S as f}from"./sysTool.8be1b078.js";import{Y as c,f as v,o as b,c as T,a as U,S as C,Q as g,u as h,M as _,af as y,as as j,at as V,a0 as F,P as w}from"./@vue.8518410d.js";import"./@vueuse.c0256496.js";import"./dayjs.b9b14681.js";import"./axios.765908e4.js";import"./lodash-es.8ca9079f.js";import"./@element-plus.102632fb.js";import"./async-validator.ed4c92a2.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.ae8a7199.js";import"./pinia.4a496763.js";import"./vue-demi.b3a9cad9.js";import"./screenfull.258ac312.js";import"./nprogress.aae2b787.js";const k={class:"main-container"},M={class:"main",style:{"background-color":"inherit"}},x=(e=>(j("data-v-de6c8034"),e=e(),V(),e))((()=>U("div",{class:"card-header"},[U("span",null,"NTP校时")],-1))),S={class:"item"},Z={style:{"padding-right":"14px",height:"100%",overflow:"auto"}},P=F("保存"),z=F("立即校时"),A={class:"remark"},B=F("操作步骤:"),N=F("1、选择时区（默认是UTC+8时区）"),I=F("2、输入主服务器地址、端口"),O=F("3、输入次服务器地址、端口"),R=F("4、保存配置，重启后生肖"),$=F("5、立即校时，系统时间立即更新");var E=m({setup(m){const j=i(),V=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,F=/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/,E=(e,a,l)=>{console.log("validateIP"),""!==a?V.test(a)||F.test(a)?l():l(new Error("格式错误！")):l()},Q=c({showBtn:!1,timeZoneOptions:[{value:"UTC+8",label:"UTC+8"},{value:"UTC+7",label:"UTC+7"},{value:"UTC+6",label:"UTC+6"},{value:"UTC+5",label:"UTC+5"},{value:"UTC+4",label:"UTC+4"},{value:"UTC+3",label:"UTC+3"},{value:"UTC+2",label:"UTC+2"},{value:"UTC+1",label:"UTC+1"},{value:"UTC+0",label:"UTC+0"},{value:"UTC-1",label:"UTC-1"},{value:"UTC-2",label:"UTC-2"},{value:"UTC-3",label:"UTC-3"},{value:"UTC-4",label:"UTC-4"},{value:"UTC-5",label:"UTC-5"},{value:"UTC-6",label:"UTC-6"},{value:"UTC-7",label:"UTC-7"},{value:"UTC-8",label:"UTC-8"}],ntpForm:{enable:"",timeZone:"",urlMaster:"",portMaster:null,urlSlave:"",portSlave:null},ntpRules:{urlMaster:[{validator:E,trigger:"blur"}],portMaster:[{type:"number",message:"必须是数字",trigger:"blur"}],urlSlave:[{validator:E,trigger:"blur"}],portSlave:[{type:"number",message:"必须是数字",trigger:"blur"}]}}),Y=()=>{const e={token:j.token,data:{},mock:!0};f.getNTPInfo(e).then((e=>{"0"===e.code?(Q.ntpForm=e.data,p({type:"success",message:"获取NTP服务成功！"}),Q.showBtn=!1):G(e)}))};Y();const q=v(null),D=(e,a)=>{p({type:"0"===e.code?"success":"error",message:e.message}),"0"===e.code&&a&&a()},G=e=>{p({type:"error",message:e.message})};return(p,m)=>{const i=e,c=a,v=l,V=t,F=o,E=s,G=r,H=u,J=d,K=n;return b(),T("div",k,[U("div",M,[C(K,{gutter:20,style:{height:"100%"}},{default:g((()=>[C(J,{span:12},{default:g((()=>[C(H,{class:"box-card",shadow:"hover"},{header:g((()=>[x])),default:g((()=>[U("div",S,[C(H,{style:{height:"100%"}},{default:g((()=>[U("div",Z,[C(G,{model:h(Q).ntpForm,rules:h(Q).ntpRules,ref_key:"ntpRef",ref:q,"status-icon":"","label-position":"right","label-width":"120px"},{default:g((()=>[C(c,{label:"启用状态"},{default:g((()=>[C(i,{modelValue:h(Q).ntpForm.enable,"onUpdate:modelValue":m[0]||(m[0]=e=>h(Q).ntpForm.enable=e),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])])),_:1}),C(c,{label:"时区"},{default:g((()=>[C(V,{modelValue:h(Q).ntpForm.timeZone,"onUpdate:modelValue":m[1]||(m[1]=e=>h(Q).ntpForm.timeZone=e),modelModifiers:{number:!0},style:{width:"100%"},placeholder:"请选时区"},{default:g((()=>[(b(!0),T(_,null,y(h(Q).timeZoneOptions,(e=>(b(),w(v,{key:"type_"+e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),C(c,{label:"主服务器地址",prop:"urlMaster"},{default:g((()=>[C(F,{type:"text",modelValue:h(Q).ntpForm.urlMaster,"onUpdate:modelValue":m[2]||(m[2]=e=>h(Q).ntpForm.urlMaster=e),autocomplete:"off",placeholder:"请输入主服务器地址"},null,8,["modelValue"])])),_:1}),C(c,{label:"主服务器端口",prop:"portMaster"},{default:g((()=>[C(F,{type:"text",modelValue:h(Q).ntpForm.portMaster,"onUpdate:modelValue":m[3]||(m[3]=e=>h(Q).ntpForm.portMaster=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入主服务器端口"},null,8,["modelValue"])])),_:1}),C(c,{label:"次服务器地址",prop:"urlSlave"},{default:g((()=>[C(F,{type:"text",modelValue:h(Q).ntpForm.urlSlave,"onUpdate:modelValue":m[4]||(m[4]=e=>h(Q).ntpForm.urlSlave=e),autocomplete:"off",placeholder:"请输入次服务器地址"},null,8,["modelValue"])])),_:1}),C(c,{label:"次服务器端口",prop:"portSlave"},{default:g((()=>[C(F,{type:"text",modelValue:h(Q).ntpForm.portSlave,"onUpdate:modelValue":m[5]||(m[5]=e=>h(Q).ntpForm.portSlave=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入次服务器端口"},null,8,["modelValue"])])),_:1}),C(c,null,{default:g((()=>[C(E,{disabled:h(Q).showBtn,type:"primary",onClick:m[6]||(m[6]=e=>{q.value.validate((e=>{if(!e)return!1;{Q.showBtn=!0;const e={token:j.token,data:Q.ntpForm,mock:!0};f.updateNTP(e).then((e=>{D(e,Y)}))}}))})},{default:g((()=>[P])),_:1},8,["disabled"]),C(E,{type:"primary",onClick:m[7]||(m[7]=e=>(()=>{const e={token:j.token,data:{}};f.sendTimingCmd(e).then((e=>{D(e,Y)}))})())},{default:g((()=>[z])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1}),U("div",A,[C(K,{gutter:16},{default:g((()=>[C(J,{span:3},{default:g((()=>[B])),_:1}),C(J,{span:21},{default:g((()=>[N])),_:1})])),_:1}),C(K,{gutter:16},{default:g((()=>[C(J,{offset:3,span:21},{default:g((()=>[I])),_:1})])),_:1}),C(K,{gutter:16},{default:g((()=>[C(J,{offset:3,span:21},{default:g((()=>[O])),_:1})])),_:1}),C(K,{gutter:16},{default:g((()=>[C(J,{offset:3,span:21},{default:g((()=>[R])),_:1})])),_:1}),C(K,{gutter:16},{default:g((()=>[C(J,{offset:3,span:21},{default:g((()=>[$])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-de6c8034"]]);export{E as default};
