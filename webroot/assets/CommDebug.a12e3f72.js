import{m as e,y as a,A as t,Q as l,p as s,O as r,P as o,u as d,h as n}from"./element-plus.795748f2.js";import{_ as c,u as i}from"./index.3a6602e1.js";import{S as u}from"./sysTool.8be1b078.js";import{I as m}from"./interface.d9f27ae5.js";import{Y as p,o as f,c as v,a as h,S as g,Q as b,u as y,L as k,M as j,af as _,as as x,at as C,a0 as D,U as V,O as I,P as T}from"./@vue.8518410d.js";import"./@vueuse.c0256496.js";import"./dayjs.b9b14681.js";import"./axios.765908e4.js";import"./lodash-es.8ca9079f.js";import"./@element-plus.102632fb.js";import"./async-validator.ed4c92a2.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.ae8a7199.js";import"./pinia.4a496763.js";import"./vue-demi.b3a9cad9.js";import"./screenfull.258ac312.js";import"./nprogress.aae2b787.js";const w={class:"main-container"},L={class:"main",style:{"background-color":"inherit"}},U=(e=>(x("data-v-26fe9234"),e=e(),C(),e))((()=>h("div",{class:"card-header"},[h("span",null,"通讯调试助手")],-1))),A={class:"item"},N={class:"st-receive"},O={class:"str-content"},S={key:0,class:"str-noData"},M={key:0},P={class:"st-send"},R={class:"st-operate"},F={style:{"margin-bottom":"10px"}},Q=D("清空显示区"),z=D(" 发送 "),E=D("清空发送区"),Y={class:"st-remark"},$=D("操作步骤:"),q=D("1、选择采集接口"),B=D("2、选择校验方式"),G=D("3、发送区编写发送的报文"),H=D("4、显示区显示发送的报文和返回的报文");var J=c({setup(c){const x=i(),C=p({receiveData:[],sendData:"",curCollect:"",interfaceList:[{name:"collect01",label:"采集接口01"},{name:"modbusTCP",label:"采集接口02"}],receiveTime:!0,curCheck:0,checkOptions:[{name:0,label:"不校验"},{name:1,label:"CRC16"},{name:2,label:"SUM"}]});(()=>{const e={token:x.token,data:{}};m.getInterfaceList(e).then((e=>{console.log("getInterfaceList -> res",e),e&&("0"===e.code?C.interfaceList=e.data:D(e))}))})();const D=e=>{n({type:"error",message:e.message})};return(n,c)=>{const i=e,m=a,p=t,J=l,K=s,W=r,X=o,Z=d;return f(),v("div",w,[h("div",L,[g(X,{gutter:20,style:{height:"100%"}},{default:b((()=>[g(W,{span:12},{default:b((()=>[g(Z,{class:"box-card",shadow:"hover"},{header:b((()=>[U])),default:b((()=>[h("div",A,[h("div",N,[h("div",O,[0==y(C).receiveData.length?(f(),v("div",S,"显示区")):k("",!0),(f(!0),v(j,null,_(y(C).receiveData,((e,a)=>(f(),v("div",null,[y(C).receiveTime?(f(),v("div",M,"【"+V(e.date)+"】",1)):k("",!0),h("div",{class:I(1==e.type?"TxInfo":"RxInfo")},V(1==e.type?"Tx："+e.data:"Rx："+e.data),3)])))),256))])]),h("div",P,[g(i,{modelValue:y(C).sendData,"onUpdate:modelValue":c[0]||(c[0]=e=>y(C).sendData=e),class:"sts-sendArea",rows:"5",type:"textarea",placeholder:""==y(C).sendData?"发送区":""},null,8,["modelValue","placeholder"])]),h("div",R,[h("div",null,[g(p,{modelValue:y(C).curCollect,"onUpdate:modelValue":c[1]||(c[1]=e=>y(C).curCollect=e),style:{"margin-bottom":"10px"},placeholder:"请选择采集接口"},{default:b((()=>[(f(!0),v(j,null,_(y(C).interfaceList,(e=>(f(),T(m,{key:e.collInterfaceName,label:e.collInterfaceName,value:e.collInterfaceName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),h("div",F,[g(J,{modelValue:y(C).receiveTime,"onUpdate:modelValue":c[2]||(c[2]=e=>y(C).receiveTime=e),label:"接收时间",border:"",style:{width:"100%",height:"34px"}},null,8,["modelValue"])]),g(K,{type:"danger",style:{height:"34px",width:"100%"},plain:"",onClick:c[3]||(c[3]=e=>{C.receiveData=[]})},{default:b((()=>[Q])),_:1})]),h("div",null,[g(K,{type:"primary",style:{height:"34px",width:"100%","margin-bottom":"10px"},plain:"",onClick:c[4]||(c[4]=e=>(()=>{if(""===C.curCollect)return void D({message:"请选择采集接口！"});if(""===C.curCheck)return void D({message:"请选择校验方式！"});let e="";if(""===C.sendData)return void D({message:"发送数据不能为空！"});let a=C.sendData.replaceAll(" ","");if(!/^[0-9a-fA-F]+$/.test(a))return D({message:"报文格式错误，只能输入字符【0-9,a-f,A-F或者空格】！"}),C.sendData="",void(a="");const t=a.length;for(var l=0;l<t;l+=2)l<t&&(e+=a.substr(l,2)+(l+2>=t?"":" "));const s={token:x.token,data:{collInterfaceName:C.curCollect,directData:e,checkSum:C.curCheck}};u.sendMessage(s).then((e=>{"0"===e.code?e.data.forEach((e=>{C.receiveData.push(e)})):D(e)}))})())},{default:b((()=>[z])),_:1}),g(p,{modelValue:y(C).curCheck,"onUpdate:modelValue":c[5]||(c[5]=e=>y(C).curCheck=e),style:{"margin-bottom":"10px"},placeholder:"请选择数据校验"},{default:b((()=>[(f(!0),v(j,null,_(y(C).checkOptions,(e=>(f(),T(m,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),g(K,{type:"danger",style:{height:"34px",width:"100%"},plain:"",onClick:c[6]||(c[6]=e=>{C.sendData=""})},{default:b((()=>[E])),_:1})])]),h("div",Y,[g(X,{gutter:16},{default:b((()=>[g(W,{span:3},{default:b((()=>[$])),_:1}),g(W,{span:21},{default:b((()=>[q])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[B])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[G])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[H])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-26fe9234"]]);export{J as default};
