import{K as e,n as a,v as l,w as t,m as o,p as r,o as s,u as d,F as u,G as p,g as n}from"./element-plus.64650d13.js";import{_ as m,u as i}from"./index.98f42e56.js";import{S as f}from"./sysTool.0aa1cd13.js";import{Y as c,f as v,o as b,c as T,a as U,S as C,Q as g,u as h,M as _,af as j,at as y,au as V,a0 as F,P as w}from"./@vue.5db09832.js";import"./@vueuse.af8df401.js";import"./dayjs.b9b14681.js";import"./axios.765908e4.js";import"./lodash-es.8ca9079f.js";import"./@element-plus.aa3ef65f.js";import"./async-validator.ed4c92a2.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.d969f71f.js";import"./pinia.69c74452.js";import"./vue-demi.b3a9cad9.js";import"./screenfull.258ac312.js";import"./vue-echarts.8f00425b.js";import"./resize-detector.4e96b72b.js";import"./echarts.62a08783.js";import"./zrender.56caf4f2.js";import"./tslib.60310f1a.js";import"./nprogress.aae2b787.js";const k={class:"main-container"},M={class:"main",style:{"background-color":"inherit"}},x=(e=>(y("data-v-de6c8034"),e=e(),V(),e))((()=>U("div",{class:"card-header"},[U("span",null,"NTP校时")],-1))),S={class:"item"},Z={style:{"padding-right":"14px",height:"100%",overflow:"auto"}},z=F("保存"),P=F("立即校时"),A={class:"remark"},B=F("操作步骤:"),N=F("1、选择时区（默认是UTC+8时区）"),I=F("2、输入主服务器地址、端口"),R=F("3、输入次服务器地址、端口"),$=F("4、保存配置，重启后生肖"),O=F("5、立即校时，系统时间立即更新");var E=m({setup(m){const y=i(),V=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,F=/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/,E=(e,a,l)=>{console.log("validateIP"),""!==a?V.test(a)||F.test(a)?l():l(new Error("格式错误！")):l()},G=c({showBtn:!1,timeZoneOptions:[{value:"UTC+8",label:"UTC+8"},{value:"UTC+7",label:"UTC+7"},{value:"UTC+6",label:"UTC+6"},{value:"UTC+5",label:"UTC+5"},{value:"UTC+4",label:"UTC+4"},{value:"UTC+3",label:"UTC+3"},{value:"UTC+2",label:"UTC+2"},{value:"UTC+1",label:"UTC+1"},{value:"UTC+0",label:"UTC+0"},{value:"UTC-1",label:"UTC-1"},{value:"UTC-2",label:"UTC-2"},{value:"UTC-3",label:"UTC-3"},{value:"UTC-4",label:"UTC-4"},{value:"UTC-5",label:"UTC-5"},{value:"UTC-6",label:"UTC-6"},{value:"UTC-7",label:"UTC-7"},{value:"UTC-8",label:"UTC-8"}],ntpForm:{enable:"",timeZone:"",urlMaster:"",portMaster:null,urlSlave:"",portSlave:null},ntpRules:{urlMaster:[{validator:E,trigger:"blur"}],portMaster:[{type:"number",message:"必须是数字",trigger:"blur"}],urlSlave:[{validator:E,trigger:"blur"}],portSlave:[{type:"number",message:"必须是数字",trigger:"blur"}]}}),K=()=>{const e={token:y.token,data:{},mock:!0};f.getNTPInfo(e).then((e=>{"0"===e.code?(G.ntpForm=e.data,n({type:"success",message:"获取NTP服务成功！"}),G.showBtn=!1):q(e)}))};K();const Q=v(null),Y=(e,a)=>{n({type:"0"===e.code?"success":"error",message:e.message}),"0"===e.code&&a&&a()},q=e=>{n({type:"error",message:e.message})};return(n,m)=>{const i=e,c=a,v=l,V=t,F=o,E=r,q=s,D=d,H=u,J=p;return b(),T("div",k,[U("div",M,[C(J,{gutter:20,style:{height:"100%"}},{default:g((()=>[C(H,{span:12},{default:g((()=>[C(D,{class:"box-card",shadow:"hover"},{header:g((()=>[x])),default:g((()=>[U("div",S,[C(D,{style:{height:"100%"}},{default:g((()=>[U("div",Z,[C(q,{model:h(G).ntpForm,rules:h(G).ntpRules,ref_key:"ntpRef",ref:Q,"status-icon":"","label-position":"right","label-width":"120px"},{default:g((()=>[C(c,{label:"启用状态"},{default:g((()=>[C(i,{modelValue:h(G).ntpForm.enable,"onUpdate:modelValue":m[0]||(m[0]=e=>h(G).ntpForm.enable=e),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])])),_:1}),C(c,{label:"时区"},{default:g((()=>[C(V,{modelValue:h(G).ntpForm.timeZone,"onUpdate:modelValue":m[1]||(m[1]=e=>h(G).ntpForm.timeZone=e),modelModifiers:{number:!0},style:{width:"100%"},placeholder:"请选时区"},{default:g((()=>[(b(!0),T(_,null,j(h(G).timeZoneOptions,(e=>(b(),w(v,{key:"type_"+e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),C(c,{label:"主服务器地址",prop:"urlMaster"},{default:g((()=>[C(F,{type:"text",modelValue:h(G).ntpForm.urlMaster,"onUpdate:modelValue":m[2]||(m[2]=e=>h(G).ntpForm.urlMaster=e),autocomplete:"off",placeholder:"请输入主服务器地址"},null,8,["modelValue"])])),_:1}),C(c,{label:"主服务器端口",prop:"portMaster"},{default:g((()=>[C(F,{type:"text",modelValue:h(G).ntpForm.portMaster,"onUpdate:modelValue":m[3]||(m[3]=e=>h(G).ntpForm.portMaster=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入主服务器端口"},null,8,["modelValue"])])),_:1}),C(c,{label:"次服务器地址",prop:"urlSlave"},{default:g((()=>[C(F,{type:"text",modelValue:h(G).ntpForm.urlSlave,"onUpdate:modelValue":m[4]||(m[4]=e=>h(G).ntpForm.urlSlave=e),autocomplete:"off",placeholder:"请输入次服务器地址"},null,8,["modelValue"])])),_:1}),C(c,{label:"次服务器端口",prop:"portSlave"},{default:g((()=>[C(F,{type:"text",modelValue:h(G).ntpForm.portSlave,"onUpdate:modelValue":m[5]||(m[5]=e=>h(G).ntpForm.portSlave=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入次服务器端口"},null,8,["modelValue"])])),_:1}),C(c,null,{default:g((()=>[C(E,{disabled:h(G).showBtn,type:"primary",onClick:m[6]||(m[6]=e=>{Q.value.validate((e=>{if(!e)return!1;{G.showBtn=!0;const e={token:y.token,data:G.ntpForm,mock:!0};f.updateNTP(e).then((e=>{Y(e,K)}))}}))})},{default:g((()=>[z])),_:1},8,["disabled"]),C(E,{type:"primary",onClick:m[7]||(m[7]=e=>(()=>{const e={token:y.token,data:{}};f.sendTimingCmd(e).then((e=>{Y(e,K)}))})())},{default:g((()=>[P])),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1}),U("div",A,[C(J,{gutter:16},{default:g((()=>[C(H,{span:3},{default:g((()=>[B])),_:1}),C(H,{span:21},{default:g((()=>[N])),_:1})])),_:1}),C(J,{gutter:16},{default:g((()=>[C(H,{offset:3,span:21},{default:g((()=>[I])),_:1})])),_:1}),C(J,{gutter:16},{default:g((()=>[C(H,{offset:3,span:21},{default:g((()=>[R])),_:1})])),_:1}),C(J,{gutter:16},{default:g((()=>[C(H,{offset:3,span:21},{default:g((()=>[$])),_:1})])),_:1}),C(J,{gutter:16},{default:g((()=>[C(H,{offset:3,span:21},{default:g((()=>[O])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-de6c8034"]]);export{E as default};
