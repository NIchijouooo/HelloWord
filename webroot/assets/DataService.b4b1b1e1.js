import{M as e,h as a,C as l,e as t,p as o,m as r,D as d,F as n,G as i,u as c,I as s,J as p,q as u,n as m,y as g,A as y,o as f,H as v,v as b,L as w,B as h,K as F}from"./element-plus.795748f2.js";import{Y as C,f as _,p as N,h as k,X as V,o as T,c as S,a as x,S as D,Q as R,u as M,U as I,a0 as L,M as A,af as U,O as P,P as j,L as z,as as B,at as G,H as q,J as K,K as O}from"./@vue.8518410d.js";import{_ as E,u as Q,v as H}from"./index.3a6602e1.js";import{S as J}from"./service.1f0c8672.js";import{I as Y}from"./interface.d9f27ae5.js";import{T as $}from"./transferModel.12664550.js";import{J as X,I as Z,L as W,M as ee}from"./@element-plus.102632fb.js";import{D as ae}from"./deviceModel.eb023515.js";import{P as le}from"./product.7a418cc2.js";import"./@vueuse.c0256496.js";import"./dayjs.b9b14681.js";import"./axios.765908e4.js";import"./lodash-es.8ca9079f.js";import"./async-validator.ed4c92a2.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.ae8a7199.js";import"./pinia.4a496763.js";import"./vue-demi.b3a9cad9.js";import"./screenfull.258ac312.js";import"./nprogress.aae2b787.js";const te=e=>(B("data-v-e82f22f8"),e=e(),G(),e),oe={class:"main-container"},re={class:"main"},de={class:"title",style:{"justify-content":"space-between"}},ne={class:"title-left"},ie=L(" 返回上报服务 "),ce=L(" 导入设备 "),se=L(" 导出设备 "),pe=L(" 主动上报 "),ue=L(" 添加 "),me=L(" 删除 "),ge=L(" 刷新 "),ye={class:"title",style:{top:"60px",height:"76px",padding:"20px 0","justify-content":"flex-start"}},fe={class:"tName"},ve=L("编辑"),be=te((()=>x("div",null,"无数据",-1))),we={class:"pagination"},he={class:"dialog-content"},Fe={class:"dialog-cLeft"},Ce=te((()=>x("div",{class:"card-header"},[x("span",null,"请选择采集设备")],-1))),_e={class:"card-main"},Ne={class:"dialog-cRight"},ke=te((()=>x("div",{class:"card-header"},[x("span",null,"请选择一个上报模型")],-1))),Ve={class:"card-main"},Te={class:"upload-item-text"},Se={class:"dialog-footer"},xe=L("取消"),De=L("添加"),Re={class:"dialog-content"},Me={class:"dialog-footer"},Ie=L("取消"),Le=L("保存"),Ae=L("选择文件"),Ue=te((()=>x("div",{class:"el-upload__tip"},"只能上传一个文件，只支持xlsx格式文件！",-1))),Pe={class:"dialog-footer"},je=L("取消"),ze=L("上传");var Be=E({props:{curGateway:{type:Object,default:{}}},emits:["changeDnFlag"],setup(b,{emit:w}){const h=b,F=Q();console.log("id -> props",h);const B=C({headerCellStyle:{background:H.primaryColor,color:H.fontWhiteColor,height:"54px"},cellStyle:{height:"48px"},tableMaxHeight:0,currentPage:1,pagesize:20,nodeTableData:[],dFlag:!1,dTitle:"添加设备",nodeInfo:"",nodeForm:{serviceName:"",collInterfaceName:"",deviceName:"",uploadModel:"",deviceAddr:"",protocol:"",deviceCode:"",productKey:"",deviceID:"",deviceSecret:""},nodeRules:{serviceName:[{required:!0,trigger:"blur"}],collInterfaceName:[{required:!0,trigger:"blur"}],deviceName:[{required:!0,trigger:"blur"}],deviceAddr:[{required:!0,trigger:"blur"}],protocol:[{required:!0,trigger:"blur"}],uploadModel:[{required:!0,message:"上报模型不能为空",trigger:"blur"}],deviceCode:[{required:!0,message:"通讯编码不能为空",trigger:"blur"}],productKey:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}],deviceID:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}],deviceSecret:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}]},nodeModelList:[],selectedNodes:[],dpFlag:!0,interfaceList:[],nFlag:!1,treeProps:{children:"children",label:"label",isLeaf:"leaf"},deviceList:[],interfaceNames:[],uFlag:!1,filterText:"",transferModelList:[],curModelName:""}),G=e=>{const l={token:F.token,data:{serviceName:h.curGateway.serviceName}};J.getDeviceByServiceIdList(l).then((async l=>{console.log("getDeviceByServiceIdList -> res ",l),l&&("0"===l.code?(B.nodeTableData=l.data,1===e&&a({type:"success",message:"刷新成功！"})):la(l),await q((()=>{B.tableMaxHeight=K.value.clientHeight-34-36-22})))}))};G();const K=_(null);(()=>{const e={token:F.token,data:{}};Y.getInterfaceList(e).then((e=>{console.log("getInterfaceList -> res",e),"0"===e.code?(B.interfaceList=[],B.interfaceNames=[],e.data.forEach((e=>{const a={label:e.collInterfaceName,name:e.collInterfaceName,hasChildren:!0};B.interfaceList.push(a),B.interfaceNames.push(e.collInterfaceName)}))):la(e)}))})();const O=e=>{B.selectedNodes=e},E=e=>{B.currentPage=e},ae=N((()=>{let e=B.nodeInfo;return B.nodeTableData.filter((a=>!e||a.deviceName.toLowerCase().includes(e.toLowerCase())||a.deviceAddr.toLowerCase().includes(e.toLowerCase()))).slice((B.currentPage-1)*B.pagesize,B.currentPage*B.pagesize)})),le=N((()=>{let e=B.nodeInfo;return B.nodeTableData.filter((a=>!e||a.deviceName.toLowerCase().includes(e.toLowerCase())||a.deviceAddr.toLowerCase().includes(e.toLowerCase())))})),te=e=>{B.pagesize=e},Be=(e,a)=>(console.log("loadNode-> node === ",e),0===e.level?a(B.interfaceList):1!==e.level?a([]):(console.log("node->",e),void Ge(e.data.name).then((async l=>(console.log("getCollDevices -> res",l),"0"===l.code?(B.deviceList=[],l.data.deviceNodeMap&&l.data.deviceNodeMap.forEach((a=>{const l={label:a.label,name:a.name,addr:a.addr,collName:e.data.name,hasChildren:!1};B.deviceList.push(l)})),console.log("node->ctxData.deviceList",B.deviceList),a(B.deviceList)):(la(l),a([]))))))),Ge=e=>{const a={token:F.token,data:{name:e}};return Y.getCollDevices(a)};(e=>{const a={token:F.token,data:{}};$.getModelList(a).then((e=>{console.log("getModelList -> res",e),"0"===e.code?B.transferModelList=e.data:la(e)}))})();const qe=_(null);k((()=>B.filterText),(e=>{qe.value&&qe.value.filter(e)}));const Ke=(e,a)=>(console.log("filterNode value",e),!e||a.label.includes(e)),Oe=()=>{B.nFlag=!1},Ee=e=>{B.dFlag=!0,B.dTitle="编辑设备",B.nodeForm={serviceName:e.serviceName,collInterfaceName:e.collInterfaceName,deviceName:e.deviceName,deviceLabel:e.deviceLabel,uploadModel:e.uploadModel,deviceAddr:e.deviceAddr,protocol:e.protocol,deviceCode:""===e.param.deviceCode?e.deviceAddr:e.param.deviceCode,productKey:e.productKey,deviceID:e.deviceID,deviceSecret:e.deviceSecret}},Qe=_(null),He=()=>{B.dFlag=!1,Qe.value.resetFields()},Je=e=>{He()},Ye=()=>{Xe.value&&Xe.value.submit()},$e=e=>{},Xe=_(null),Ze=e=>{Xe.value.clearFiles();const a=e[0];Xe.value.handleStart(a)},We=e=>{console.log("beforeUpload -> file",e);let l=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type)||""!=e.name&&e.name.indexOf("xlsx")>-1;if(l){if(l){let l=new FormData;l.append("file",e);const t={token:F.token,contentType:"multipart/form-data",data:l};J.addDeviceFromCSV(t).then((e=>{"0"===e.code?(a.success(e.message),B.uFlag=!1,G()):la(e)}))}}else a({type:"error",message:"文件格式不正确,必须是xlsx文件！"})},ea=()=>{B.uFlag=!1,Xe.value.clearFiles()},aa=()=>{ea()},la=e=>{a({type:"error",message:e.message})},ta=()=>{const e={token:F.token,responseType:"blob",data:{serviceName:h.curGateway.serviceName}};J.exportDevice(e).then((e=>{if(console.log("exportDevice -> res",e),e&&"1"===e.code)return void la(e);const a=new Blob([e.blob]),l=e.fileName,t=document.createElement("a");t.download=l,t.style.display="none",t.href=URL.createObjectURL(a),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}))},oa=(e,l)=>{a({type:"0"===e.code?"success":"error",message:e.message}),"0"===e.code&&l&&l()};return(b,C)=>{const _=t,N=o,k=r,q=V("Icon"),Q=d,H=n,Y=i,Ge=e,ra=c,da=s,na=p,ia=u,ca=m,sa=g,pa=y,ua=f,ma=v;return T(),S("div",oe,[x("div",re,[x("div",de,[x("div",ne,[D(N,{type:"primary",plain:"",onClick:C[0]||(C[0]=e=>{w("changeDnFlag")}),style:{"margin-right":"20px"}},{default:R((()=>[D(_,{class:"el-input__icon"},{default:R((()=>[D(M(X))])),_:1}),ie])),_:1}),D(k,{style:{width:"200px"},placeholder:"请输入 地址/名称 过滤",clearable:"",modelValue:M(B).nodeInfo,"onUpdate:modelValue":C[1]||(C[1]=e=>M(B).nodeInfo=e)},{prefix:R((()=>[D(_,{class:"el-input__icon"},{default:R((()=>[D(M(Z))])),_:1})])),_:1},8,["modelValue"])]),x("div",null,[D(N,{type:"primary",plain:"",class:"right-btn",onClick:C[2]||(C[2]=e=>{B.uFlag=!0})},{default:R((()=>[D(_,{class:"el-input__icon"},{default:R((()=>[D(M(W))])),_:1}),ce])),_:1}),D(N,{type:"primary",plain:"",class:"right-btn",onClick:ta},{default:R((()=>[D(_,{class:"el-input__icon"},{default:R((()=>[D(M(ee))])),_:1}),se])),_:1}),D(N,{type:"primary",bg:"",class:"right-btn",onClick:C[3]||(C[3]=e=>(()=>{let e=[];if(0===B.selectedNodes.length)return void a.info("请至少选择一个设备！");B.selectedNodes.forEach((a=>{e.push(a.deviceName)}));const l={token:F.token,data:{serviceName:h.curGateway.serviceName,deviceNames:e}};$.reportNodes(l).then((e=>{"0"===e.code?a.success(e.message):la(e)}))})())},{default:R((()=>[D(_,{class:"btn-icon"},{default:R((()=>[D(q,{name:"local-report",size:"14px",color:"#ffffff"})])),_:1}),pe])),_:1}),D(N,{type:"primary",bg:"",class:"right-btn",onClick:C[4]||(C[4]=e=>{B.nFlag=!0})},{default:R((()=>[D(_,{class:"btn-icon"},{default:R((()=>[D(q,{name:"local-add",size:"14px",color:"#ffffff"})])),_:1}),ue])),_:1}),D(N,{type:"danger",bg:"",class:"right-btn",onClick:C[5]||(C[5]=e=>(()=>{let e=[];0!==B.selectedNodes.length?(B.selectedNodes.forEach((a=>{e.push(a.deviceName)})),console.log("dList",e),l.confirm("确定要删除这些吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const a={token:F.token,data:{serviceName:h.curGateway.serviceName,deviceNames:e}};J.deleteDevice(a).then((e=>{oa(e,G)}))})).catch((()=>{a({type:"info",message:"取消删除"})}))):a.info("请至少选择一个设备！")})())},{default:R((()=>[D(_,{class:"btn-icon"},{default:R((()=>[D(q,{name:"local-delete",size:"14px",color:"#ffffff"})])),_:1}),me])),_:1}),D(N,{style:{color:"#fff"},color:"#2EA554",class:"right-btn",onClick:C[6]||(C[6]=e=>{G(1)})},{default:R((()=>[D(_,{class:"btn-icon"},{default:R((()=>[D(q,{name:"local-refresh",size:"14px",color:"#ffffff"})])),_:1}),ge])),_:1})])]),x("div",ye,[x("div",fe,I(h.curGateway.serviceName),1)]),x("div",{class:"content",ref_key:"contentRef",ref:K,style:{top:"136px"}},[D(H,{data:M(ae),"cell-style":M(B).cellStyle,"header-cell-style":M(B).headerCellStyle,"max-height":M(B).tableMaxHeight,style:{width:"100%"},stripe:"",onSelectionChange:O,onRowDblclick:Ee},{empty:R((()=>[be])),default:R((()=>[D(Q,{type:"selection",width:"55"}),D(Q,{prop:"deviceName",label:"设备名称",width:"auto","min-width":"180",align:"center"}),D(Q,{prop:"deviceLabel",label:"设备标签",width:"auto","min-width":"180",align:"center"}),D(Q,{prop:"deviceAddr",label:"通讯地址",width:"auto","min-width":"150",align:"center"}),D(Q,{prop:"uploadModel",label:"上报模型",width:"auto","min-width":"150",align:"center"}),D(Q,{prop:"collInterfaceName",label:"采集接口名称",width:"auto","min-width":"150",align:"center"}),D(Q,{label:"通信状态",width:"auto","min-width":"100",align:"center"},{default:R((e=>[L(I("onLine"===e.row.commStatus?"在线":"离线"),1)])),_:1}),D(Q,{label:"上报参数",width:"auto","min-width":"180",align:"center"},{default:R((e=>[L(I(e.row.param),1)])),_:1}),D(Q,{label:"操作",width:"auto","min-width":"120",align:"center",fixed:"right"},{default:R((e=>[D(N,{onClick:a=>Ee(e.row),text:"",type:"primary"},{default:R((()=>[ve])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","cell-style","header-cell-style","max-height"]),x("div",we,[D(Y,{"current-page":M(B).currentPage,"page-size":M(B).pagesize,"page-sizes":[20,50,200,500],total:M(le).length,onCurrentChange:E,onSizeChange:te,background:"",layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"46px"}},null,8,["current-page","page-size","total"])])],512)]),D(ia,{modelValue:M(B).nFlag,"onUpdate:modelValue":C[11]||(C[11]=e=>M(B).nFlag=e),title:"添加设备",width:"1000px"},{footer:R((()=>[x("span",Se,[D(N,{onClick:C[9]||(C[9]=e=>Oe())},{default:R((()=>[xe])),_:1}),D(N,{type:"primary",onClick:C[10]||(C[10]=e=>(()=>{var e=qe.value.getCheckedNodes();if(e=e.filter((e=>!e.hasChildren)),console.log("checkedNodes => ",e),console.log("props.curGateway => ",h.curGateway),0!==e.length){let l=0,t=0;e.forEach((o=>{if(o.collName){const r={token:F.token,data:{serviceName:h.curGateway.serviceName,collInterfaceName:o.collName,deviceName:o.name,deviceLabel:o.label,deviceAddr:o.addr,protocol:h.curGateway.protocol,uploadModel:B.curModelName,param:{}}};console.log("pData item -> ",o),console.log("pData",r),J.addDevice(r).then((o=>{l++,console.log("addDevice -> res ",o),"0"!==o.code?la(o):t++,l===e.length&&(a.success("添加"+l+"个设备，成功"+t+"个，失败"+(l-t)+"个。"),G())}))}})),Oe()}else a.info("请至少选择一个节点！")})())},{default:R((()=>[De])),_:1})])])),default:R((()=>[x("div",he,[x("div",Fe,[D(ra,{class:"card-box",shadow:"hover"},{header:R((()=>[Ce])),default:R((()=>[x("div",_e,[x("div",null,[D(k,{modelValue:M(B).filterText,"onUpdate:modelValue":C[7]||(C[7]=e=>M(B).filterText=e),placeholder:"节点名称过滤"},null,8,["modelValue"])]),D(Ge,{ref_key:"nodeTreeRef",ref:qe,props:M(B).treeProps,load:Be,"filter-node-method":Ke,lazy:"","show-checkbox":""},null,8,["props"])])])),_:1})]),x("div",Ne,[D(ra,{class:"card-box",shadow:"hover"},{header:R((()=>[ke])),default:R((()=>[x("div",Ve,[D(na,{modelValue:M(B).curModelName,"onUpdate:modelValue":C[8]||(C[8]=e=>M(B).curModelName=e),style:{width:"100%"}},{default:R((()=>[(T(!0),S(A,null,U(M(B).transferModelList,(e=>(T(),S("div",{class:P(["upload-item",{isClicked:e.isClicked}]),key:"tml"+e.name},[x("div",Te,[D(da,{label:e.name},{default:R((()=>[L(I(e.label+" ("+e.name+")"),1)])),_:2},1032,["label"])])],2)))),128))])),_:1},8,["modelValue"])])])),_:1})])])])),_:1},8,["modelValue"]),D(ia,{modelValue:M(B).dFlag,"onUpdate:modelValue":C[24]||(C[24]=e=>M(B).dFlag=e),title:"编辑设备",width:"600px","before-close":Je,"close-on-click-modal":!1},{footer:R((()=>[x("span",Me,[D(N,{onClick:C[22]||(C[22]=e=>He())},{default:R((()=>[Ie])),_:1}),D(N,{type:"primary",onClick:C[23]||(C[23]=e=>{Qe.value.validate((e=>{if(console.log("ctxData.nodeForm",B.nodeForm),!e)return!1;{const e={serviceName:B.nodeForm.serviceName,collInterfaceName:B.nodeForm.collInterfaceName,uploadModel:B.nodeForm.uploadModel,deviceName:B.nodeForm.deviceName,deviceLabel:B.nodeForm.deviceLabel,deviceAddr:B.nodeForm.deviceAddr,protocol:B.nodeForm.protocol,param:{deviceCode:B.nodeForm.deviceCode,productKey:B.nodeForm.productKey,deviceID:B.nodeForm.deviceID,deviceSecret:B.nodeForm.deviceSecret}},a={token:F.token,data:e};J.editDevice(a).then((e=>{oa(e,G),He()}))}}))})},{default:R((()=>[Le])),_:1})])])),default:R((()=>[x("div",Re,[D(ua,{model:M(B).nodeForm,rules:M(B).nodeRules,ref_key:"nodeFormRef",ref:Qe,"status-icon":"","label-position":"right","label-width":"120px"},{default:R((()=>[D(ca,{label:"服务名称",prop:"serviceName"},{default:R((()=>[D(k,{disabled:"",type:"text",modelValue:M(B).nodeForm.serviceName,"onUpdate:modelValue":C[12]||(C[12]=e=>M(B).nodeForm.serviceName=e),autocomplete:"off",placeholder:"请输入服务名称"},null,8,["modelValue"])])),_:1}),D(ca,{label:"采集接口名称",prop:"collInterfaceName"},{default:R((()=>[D(k,{disabled:"",type:"text",modelValue:M(B).nodeForm.collInterfaceName,"onUpdate:modelValue":C[13]||(C[13]=e=>M(B).nodeForm.collInterfaceName=e),autocomplete:"off",placeholder:"请输入采集接口名称"},null,8,["modelValue"])])),_:1}),D(ca,{label:"设备名称",prop:"deviceName"},{default:R((()=>[D(k,{disabled:"",type:"text",modelValue:M(B).nodeForm.deviceName,"onUpdate:modelValue":C[14]||(C[14]=e=>M(B).nodeForm.deviceName=e),autocomplete:"off",placeholder:"请输入设备名称"},null,8,["modelValue"])])),_:1}),D(ca,{label:"设备地址",prop:"deviceAddr"},{default:R((()=>[D(k,{disabled:"",type:"text",modelValue:M(B).nodeForm.deviceAddr,"onUpdate:modelValue":C[15]||(C[15]=e=>M(B).nodeForm.deviceAddr=e),autocomplete:"off",placeholder:"请输入设备地址"},null,8,["modelValue"])])),_:1}),D(ca,{label:"协议名称",prop:"protocol"},{default:R((()=>[D(k,{disabled:"",type:"text",modelValue:M(B).nodeForm.protocol,"onUpdate:modelValue":C[16]||(C[16]=e=>M(B).nodeForm.protocol=e),autocomplete:"off",placeholder:"请输入协议名称"},null,8,["modelValue"])])),_:1}),D(ca,{label:"上报模型",prop:"uploadModel"},{default:R((()=>[D(pa,{modelValue:M(B).nodeForm.uploadModel,"onUpdate:modelValue":C[17]||(C[17]=e=>M(B).nodeForm.uploadModel=e),style:{width:"100%"},placeholder:"请选择上报模型"},{default:R((()=>[(T(!0),S(A,null,U(M(B).transferModelList,(e=>(T(),j(sa,{key:"model_"+e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),"FSJY.MQTT"!=M(B).nodeForm.protocol?(T(),j(ca,{key:0,label:"通讯编码",prop:"deviceCode"},{default:R((()=>[D(k,{type:"text",modelValue:M(B).nodeForm.deviceCode,"onUpdate:modelValue":C[18]||(C[18]=e=>M(B).nodeForm.deviceCode=e),autocomplete:"off",placeholder:"请输入通讯编码"},null,8,["modelValue"])])),_:1})):z("",!0),"FSJY.MQTT"==M(B).nodeForm.protocol?(T(),j(ca,{key:1,label:"产品密钥",prop:"productKey"},{default:R((()=>[D(k,{type:"text",modelValue:M(B).nodeForm.productKey,"onUpdate:modelValue":C[19]||(C[19]=e=>M(B).nodeForm.productKey=e),autocomplete:"off",placeholder:"请输入网关产品密钥"},null,8,["modelValue"])])),_:1})):z("",!0),"FSJY.MQTT"==M(B).nodeForm.protocol?(T(),j(ca,{key:2,label:"通讯地址",prop:"deviceID"},{default:R((()=>[D(k,{type:"text",modelValue:M(B).nodeForm.deviceID,"onUpdate:modelValue":C[20]||(C[20]=e=>M(B).nodeForm.deviceID=e),autocomplete:"off",placeholder:"请输入网关通讯地址"},null,8,["modelValue"])])),_:1})):z("",!0),"FSJY.MQTT"==M(B).nodeForm.protocol?(T(),j(ca,{key:3,label:"设备密钥",prop:"deviceSecret"},{default:R((()=>[D(k,{type:"text",modelValue:M(B).nodeForm.deviceSecret,"onUpdate:modelValue":C[21]||(C[21]=e=>M(B).nodeForm.deviceSecret=e),autocomplete:"off",placeholder:"请输入网关设备密钥"},null,8,["modelValue"])])),_:1})):z("",!0)])),_:1},8,["model","rules"])])])),_:1},8,["modelValue"]),D(ia,{modelValue:M(B).uFlag,"onUpdate:modelValue":C[25]||(C[25]=e=>M(B).uFlag=e),title:"上传设备xlsx文件",width:"600px","before-close":aa,"close-on-click-modal":!1},{footer:R((()=>[x("span",Pe,[D(N,{onClick:ea},{default:R((()=>[je])),_:1}),D(N,{type:"primary",onClick:Ye},{default:R((()=>[ze])),_:1})])])),default:R((()=>[D(ma,{ref_key:"uploadRef",ref:Xe,action:"","auto-upload":!1,"http-request":$e,limit:1,"on-exceed":Ze,"before-upload":We},{tip:R((()=>[Ue])),default:R((()=>[D(N,{type:"primary"},{default:R((()=>[Ae])),_:1})])),_:1},512)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-e82f22f8"]]);const Ge=e=>(B("data-v-24a04e18"),e=e(),G(),e),qe={class:"main-container"},Ke={class:"main"},Oe={class:"title",style:{"justify-content":"space-between"}},Ee={class:"title-left"},Qe=L(" 返回上报服务 "),He=L(" 导入寄存器 "),Je=L(" 导出寄存器 "),Ye=L(" 主动上报 "),$e=L(" 添加 "),Xe=L(" 删除 "),Ze=L(" 刷新 "),We={class:"title",style:{top:"60px",height:"76px",padding:"20px 0","justify-content":"flex-start"}},ea={class:"tName"},aa=L("编辑"),la=Ge((()=>x("div",null,"无数据",-1))),ta={class:"pagination"},oa={class:"dialog-content"},ra={class:"dialog-footer"},da=L("取消"),na=L("保存"),ia=L("选择文件"),ca=Ge((()=>x("div",{class:"el-upload__tip"},"只能上传一个文件，只支持xlsx格式文件！",-1))),sa={class:"dialog-footer"},pa=L("取消"),ua=L("上传");var ma=E({props:{curGateway:{type:Object,default:{}}},emits:["changeDnFlag"],setup(e,{emit:c}){const s=e,p=Q();console.log("id -> props",s);const b=/^[0-9]*[1-9][0-9]*$/,w=(e,a,l)=>{0===a||b.test(a)?l():l(new Error("只能输入自然数！"))},h=C({headerCellStyle:{background:H.primaryColor,color:H.fontWhiteColor,height:"54px"},cellStyle:{height:"48px"},tableMaxHeight:0,currentPage:1,pagesize:20,regTableData:[],rFlag:!1,rTitle:"添加寄存器",regInfo:"",regForm:{serviceName:"",regName:"",label:"",propertyType:0,collName:"",nodeName:"",propertyName:"",regType:0,regAddr:0,regCnt:1,rule:"Int_AB"},regRules:{regName:[{required:!0,message:"寄存器名称不能为空！",trigger:"blur"}],label:[{required:!0,message:"寄存器标签不能为空！",trigger:"blur"}],collName:[{required:!0,message:"采集接口名称不能为空！",trigger:"blur"}],nodeName:[{required:!0,message:"设备名称不能为空！",trigger:"blur"}],propertyName:[{required:!0,message:"设备属性名称不能为空！",trigger:"blur"}],regAddr:[{required:!0,message:"寄存器地址不能为空！",trigger:"blur"},{validator:w,trigger:"blur"}],regCnt:[{required:!0,message:"寄存器数量不能为空！",trigger:"blur"},{validator:w,trigger:"blur"}],rule:[{required:!0,message:"解析规则不能为空！",trigger:"blur"}]},collOptions:[],nodeOptions:[],propertyOptions:[],nameTotsl:{},typeOptions:[{name:0,label:"设备属性"},{name:1,label:"系统属性"}],regTypeOptions:[{name:0,label:"线圈状态寄存器"},{name:1,label:"离散输入状态寄存器"},{name:2,label:"保持寄存器"},{name:3,label:"输入寄存器"}],regCntOptions:[{label:1,value:1},{label:2,value:2},{label:4,value:4}],ruleTypeOptions:{rt1:[{label:"Int_AB",value:"Int_AB"},{label:"Int_BA",value:"Int_BA"}],rt2:[{label:"Long_ABCD",value:"Long_ABCD"},{label:"Long_BADC",value:"Long_BADC"},{label:"Long_DCBA",value:"Long_DCBA"},{label:"Long_CDAB",value:"Long_CDAB"},{label:"Float_ABCD",value:"Float_ABCD"},{label:"Float_BADC",value:"Float_BADC"},{label:"Float_DCBA",value:"Float_DCBA"},{label:"Float_CDAB",value:"Float_CDAB"}],rt4:[{label:"Double_ABCDEFGH",value:"Double_ABCDEFGH"},{label:"Double_GHEFCDAB",value:"Double_GHEFCDAB"},{label:"Double_BADCFEHG",value:"Double_BADCFEHG"},{label:"Double_HGFEDCBA",value:"Double_HGFEDCBA"}]},selectedNodes:[],uFlag:!1}),F=e=>{const l={token:p.token,data:{serviceName:s.curGateway.serviceName}};J.getRegByServiceIdList(l).then((async l=>{console.log("getRegByServiceIdList -> res ",l),l&&("0"===l.code?(h.regTableData=l.data,1===e&&a({type:"success",message:"刷新成功！"})):fe(l),await q((()=>{h.tableMaxHeight=k.value.clientHeight-34-36-22})))}))};F();const k=_(null);(()=>{const e={token:p.token,data:{}};Y.getInterfaceList(e).then((e=>{console.log("getInterfaceList -> res",e),"0"===e.code?(h.collOptions=[],e.data.forEach((e=>{const a={label:e.collInterfaceName,name:e.collInterfaceName};h.collOptions.push(a)}))):fe(e)}))})();const L=e=>{z(e).then((e=>{P(e)})),h.propertyOptions=[]},P=e=>{"0"===e.code?(h.nodeOptions=[],h.nameTotsl={},e.data.deviceNodeMap.forEach((e=>{const a={label:e.label,name:e.name,tsl:e.tsl};h.nameTotsl[""+e.name]=e.tsl,h.nodeOptions.push(a)}))):fe(e)},z=e=>{const a={token:p.token,data:{name:e}};return Y.getCollDevices(a)},B=e=>{G(e)},G=e=>{const a={token:p.token,data:{name:h.nameTotsl[e]}};ae.getDeviceModelProperty(a).then((e=>{console.log("getDeviceModelProperty -> res ",e),"0"===e.code?(h.propertyOptions=[],e.data.forEach((e=>{const a={label:e.label,name:e.name};h.propertyOptions.push(a)}))):fe(e)}))},K=e=>{h.selectedNodes=e},O=e=>{h.currentPage=e},E=N((()=>{let e=h.regInfo;return h.regTableData.filter((a=>!e||a.deviceName.toLowerCase().includes(e.toLowerCase())||a.deviceAddr.toLowerCase().includes(e.toLowerCase()))).slice((h.currentPage-1)*h.pagesize,h.currentPage*h.pagesize)})),le=N((()=>{let e=h.regInfo;return h.regTableData.filter((a=>!e||a.deviceName.toLowerCase().includes(e.toLowerCase())||a.deviceAddr.toLowerCase().includes(e.toLowerCase())))})),te=e=>{h.pagesize=e},oe=e=>{h.rFlag=!0,h.rTitle="编辑寄存器",h.regForm={regName:e.regName,label:e.label,propertyType:e.propertyType,collName:e.collName,nodeName:e.nodeName,propertyName:e.propertyName,regType:e.regType,regAddr:e.regAddr,regCnt:e.regCnt,rule:e.rule},z(h.regForm.collName).then((e=>{P(e),G(h.regForm.nodeName)}))},re=()=>{h.regForm={regName:"",label:"",propertyType:0,collName:"",nodeName:"",propertyName:"",regType:0,regAddr:0,regCnt:1,rule:"Int_AB"}},de=_(null),ne=()=>{h.rFlag=!1,re()},ie=()=>{const e={token:p.token,responseType:"blob",data:{serviceName:s.curGateway.serviceName}};J.exportReg(e).then((e=>{if(console.log("exportReg -> res",e),e&&"1"===e.code)return void fe(e);const a=new Blob([e.blob]),l=e.fileName,t=document.createElement("a");t.download=l,t.style.display="none",t.href=URL.createObjectURL(a),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}))},ce=()=>{pe.value&&pe.value.submit()},se=e=>{},pe=_(null),ue=e=>{pe.value.clearFiles();const a=e[0];pe.value.handleStart(a)},me=e=>{console.log("beforeUpload -> file",e);let l=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(e.type);if(l){if(l){let l=new FormData;l.append("serviceName",s.curGateway.serviceName),l.append("fileName",e);const t={token:p.token,contentType:"multipart/form-data",data:l};J.importReg(t).then((e=>{"0"===e.code?(a.success(e.message),h.uFlag=!1,F()):fe(e)}))}}else a({type:"error",message:"文件格式不正确,必须是xlsx文件！"})},ge=()=>{h.uFlag=!1,pe.value.clearFiles()},ye=()=>{ge()},fe=e=>{a({type:"error",message:e.message})},ve=(e,l)=>{a({type:"0"===e.code?"success":"error",message:e.message}),"0"===e.code&&l&&l()};return(e,b)=>{const w=t,C=o,_=r,N=V("Icon"),P=d,z=n,G=i,q=g,Q=y,H=m,Y=f,ae=u,be=v;return T(),S("div",qe,[x("div",Ke,[x("div",Oe,[x("div",Ee,[D(C,{type:"primary",plain:"",onClick:b[0]||(b[0]=e=>{c("changeDnFlag")}),style:{"margin-right":"20px"}},{default:R((()=>[D(w,{class:"el-input__icon"},{default:R((()=>[D(M(X))])),_:1}),Qe])),_:1}),D(_,{style:{width:"200px"},placeholder:"请输入 地址/名称 过滤",clearable:"",modelValue:M(h).regInfo,"onUpdate:modelValue":b[1]||(b[1]=e=>M(h).regInfo=e)},{prefix:R((()=>[D(w,{class:"el-input__icon"},{default:R((()=>[D(M(Z))])),_:1})])),_:1},8,["modelValue"])]),x("div",null,[D(C,{type:"primary",plain:"",class:"right-btn",onClick:b[2]||(b[2]=e=>{h.uFlag=!0})},{default:R((()=>[D(w,{class:"el-input__icon"},{default:R((()=>[D(M(W))])),_:1}),He])),_:1}),D(C,{type:"primary",plain:"",class:"right-btn",onClick:ie},{default:R((()=>[D(w,{class:"el-input__icon"},{default:R((()=>[D(M(ee))])),_:1}),Je])),_:1}),D(C,{type:"primary",bg:"",class:"right-btn",onClick:b[3]||(b[3]=e=>(()=>{let e=[];if(0===h.selectedNodes.length)return void a.info("请至少选择一个设备！");h.selectedNodes.forEach((a=>{e.push(a.deviceName)}));const l={token:p.token,data:{serviceName:s.curGateway.serviceName,deviceNames:e}};$.reportNodes(l).then((e=>{"0"===e.code?a.success(e.message):fe(e)}))})())},{default:R((()=>[D(w,{class:"btn-icon"},{default:R((()=>[D(N,{name:"local-report",size:"14px",color:"#ffffff"})])),_:1}),Ye])),_:1}),D(C,{type:"primary",bg:"",class:"right-btn",onClick:b[4]||(b[4]=e=>(h.rFlag=!0,h.rTitle="添加寄存器",void re()))},{default:R((()=>[D(w,{class:"btn-icon"},{default:R((()=>[D(N,{name:"local-add",size:"14px",color:"#ffffff"})])),_:1}),$e])),_:1}),D(C,{type:"danger",bg:"",class:"right-btn",onClick:b[5]||(b[5]=e=>(()=>{let e=[];0!==h.selectedNodes.length?(h.selectedNodes.forEach((a=>{e.push(a.regName)})),console.log("dList",e),l.confirm("确定要删除这些吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const a={token:p.token,data:{serviceName:s.curGateway.serviceName,registers:e}};J.deleteReg(a).then((e=>{ve(e,F)}))})).catch((()=>{a({type:"info",message:"取消删除"})}))):a.info("请至少选择一个寄存器！")})())},{default:R((()=>[D(w,{class:"btn-icon"},{default:R((()=>[D(N,{name:"local-delete",size:"14px",color:"#ffffff"})])),_:1}),Xe])),_:1}),D(C,{style:{color:"#fff"},color:"#2EA554",class:"right-btn",onClick:b[6]||(b[6]=e=>{F(1)})},{default:R((()=>[D(w,{class:"btn-icon"},{default:R((()=>[D(N,{name:"local-refresh",size:"14px",color:"#ffffff"})])),_:1}),Ze])),_:1})])]),x("div",We,[x("div",ea,I(s.curGateway.serviceName),1)]),x("div",{class:"content",ref_key:"contentRef",ref:k,style:{top:"136px"}},[D(z,{data:M(E),"cell-style":M(h).cellStyle,"header-cell-style":M(h).headerCellStyle,"max-height":M(h).tableMaxHeight,style:{width:"100%"},stripe:"",onSelectionChange:K,onRowDblclick:oe},{empty:R((()=>[la])),default:R((()=>[D(P,{type:"selection",width:"55"}),D(P,{prop:"regName",label:"寄存器名称",width:"auto","min-width":"180",align:"center"}),D(P,{prop:"label",label:"寄存器标签",width:"auto","min-width":"180",align:"center"}),D(P,{prop:"propertyType",label:"属性类型",width:"auto","min-width":"120",align:"center"}),D(P,{prop:"collName",label:"采集接口名称",width:"auto","min-width":"180",align:"center"}),D(P,{prop:"nodeName",label:"设备名称",width:"auto","min-width":"180",align:"center"}),D(P,{prop:"propertyName",label:"设备属性名称",width:"auto","min-width":"150",align:"center"}),D(P,{prop:"regType",label:"寄存器类型",width:"auto","min-width":"100",align:"center"}),D(P,{prop:"regAddr",label:"寄存器地址",width:"auto","min-width":"100",align:"center"}),D(P,{prop:"regCnt",label:"寄存器数量",width:"auto","min-width":"100",align:"center"}),D(P,{prop:"rule",label:"解析规则",width:"auto","min-width":"100",align:"center"}),D(P,{label:"操作",width:"auto","min-width":"120",align:"center",fixed:"right"},{default:R((e=>[D(C,{onClick:a=>oe(e.row),text:"",type:"primary"},{default:R((()=>[aa])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","cell-style","header-cell-style","max-height"]),x("div",ta,[D(G,{"current-page":M(h).currentPage,"page-size":M(h).pagesize,"page-sizes":[20,50,200,500],total:M(le).length,onCurrentChange:O,onSizeChange:te,background:"",layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"46px"}},null,8,["current-page","page-size","total"])])],512)]),D(ae,{modelValue:M(h).rFlag,"onUpdate:modelValue":b[20]||(b[20]=e=>M(h).rFlag=e),title:M(h).rTitle,width:"600px"},{footer:R((()=>[x("span",ra,[D(C,{onClick:b[18]||(b[18]=e=>ne())},{default:R((()=>[da])),_:1}),D(C,{type:"primary",onClick:b[19]||(b[19]=e=>{de.value.validate((e=>{if(!e)return!1;{const e={token:p.token,data:{serviceName:s.curGateway.serviceName,register:h.regForm}};h.rTitle.includes("添加")?J.addReg(e).then((e=>{ve(e,F),ne()})):J.editReg(e).then((e=>{ve(e,F),ne()}))}}))})},{default:R((()=>[na])),_:1})])])),default:R((()=>[x("div",oa,[D(Y,{model:M(h).regForm,rules:M(h).regRules,ref_key:"regFormRef",ref:de,"status-icon":"","label-position":"right","label-width":"120px"},{default:R((()=>[D(H,{label:"采集接口名称",prop:"collName"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.collName,"onUpdate:modelValue":b[7]||(b[7]=e=>M(h).regForm.collName=e),style:{width:"100%"},placeholder:"请选择采集接口名称",onChange:L,clearable:"",filterable:""},{default:R((()=>[(T(!0),S(A,null,U(M(h).collOptions,(e=>(T(),j(q,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"设备名称",prop:"nodeName"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.nodeName,"onUpdate:modelValue":b[8]||(b[8]=e=>M(h).regForm.nodeName=e),style:{width:"100%"},placeholder:"请选择设备名称",onChange:B,clearable:"",filterable:""},{default:R((()=>[(T(!0),S(A,null,U(M(h).nodeOptions,(e=>(T(),j(q,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"设备属性名称",prop:"propertyName"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.propertyName,"onUpdate:modelValue":b[9]||(b[9]=e=>M(h).regForm.propertyName=e),style:{width:"100%"},placeholder:"请选择设备属性名称",clearable:"",filterable:""},{default:R((()=>[(T(!0),S(A,null,U(M(h).propertyOptions,(e=>(T(),j(q,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"寄存器名称",prop:"regName"},{default:R((()=>[D(_,{type:"text",modelValue:M(h).regForm.regName,"onUpdate:modelValue":b[10]||(b[10]=e=>M(h).regForm.regName=e),autocomplete:"off",placeholder:"请输入寄存器名称"},null,8,["modelValue"])])),_:1}),D(H,{label:"寄存器标签",prop:"label"},{default:R((()=>[D(_,{type:"text",modelValue:M(h).regForm.label,"onUpdate:modelValue":b[11]||(b[11]=e=>M(h).regForm.label=e),autocomplete:"off",placeholder:"请输入寄存器标签"},null,8,["modelValue"])])),_:1}),D(H,{label:"属性类型",prop:"propertyType"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.propertyType,"onUpdate:modelValue":b[12]||(b[12]=e=>M(h).regForm.propertyType=e),style:{width:"100%"},placeholder:"请选择属性类型",clearable:"",filterable:""},{default:R((()=>[(T(!0),S(A,null,U(M(h).typeOptions,(e=>(T(),j(q,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"寄存器类型",prop:"regType"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.regType,"onUpdate:modelValue":b[13]||(b[13]=e=>M(h).regForm.regType=e),style:{width:"100%"},placeholder:"请选择寄存器类型",clearable:"",filterable:""},{default:R((()=>[(T(!0),S(A,null,U(M(h).regTypeOptions,(e=>(T(),j(q,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"寄存器地址",prop:"regAddr"},{default:R((()=>[D(_,{type:"text",modelValue:M(h).regForm.regAddr,"onUpdate:modelValue":b[14]||(b[14]=e=>M(h).regForm.regAddr=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入寄存器地址"},null,8,["modelValue"])])),_:1}),D(H,{label:"寄存器数量",prop:"regCnt"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.regCnt,"onUpdate:modelValue":b[15]||(b[15]=e=>M(h).regForm.regCnt=e),modelModifiers:{number:!0},style:{width:"100%"},onChange:b[16]||(b[16]=e=>(()=>{const e=h.regForm.regCnt;1===e&&(h.regForm.rule="Int_AB"),2===e&&(h.regForm.rule="Long_ABCD"),4===e&&(h.regForm.rule="Double_ABCDEFGH")})()),placeholder:"请选择寄存器数量"},{default:R((()=>[(T(!0),S(A,null,U(M(h).regCntOptions,(e=>(T(),j(q,{key:"regCount_"+e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),D(H,{label:"解析规则",prop:"rule"},{default:R((()=>[D(Q,{modelValue:M(h).regForm.rule,"onUpdate:modelValue":b[17]||(b[17]=e=>M(h).regForm.rule=e),modelModifiers:{number:!0},style:{width:"100%"},placeholder:"请选择解析规则"},{default:R((()=>[(T(!0),S(A,null,U(M(h).ruleTypeOptions["rt"+M(h).regForm.regCnt],(e=>(T(),j(q,{key:"type_"+e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"]),D(ae,{modelValue:M(h).uFlag,"onUpdate:modelValue":b[21]||(b[21]=e=>M(h).uFlag=e),title:"上传寄存器xlsx文件",width:"600px","before-close":ye,"close-on-click-modal":!1},{footer:R((()=>[x("span",sa,[D(C,{onClick:ge},{default:R((()=>[pa])),_:1}),D(C,{type:"primary",onClick:ce},{default:R((()=>[ua])),_:1})])])),default:R((()=>[D(be,{ref_key:"uploadRef",ref:pe,action:"","auto-upload":!1,"http-request":se,limit:1,"on-exceed":ue,"before-upload":me},{tip:R((()=>[ca])),default:R((()=>[D(C,{type:"primary"},{default:R((()=>[ia])),_:1})])),_:1},512)])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-24a04e18"]]);const ga=e=>(B("data-v-06e6a1ac"),e=e(),G(),e),ya={class:"main-container"},fa={key:0,class:"main"},va={class:"title",style:{"justify-content":"space-between"}},ba=L(" 添加 "),wa=L(" 刷新 "),ha={class:"param-content"},Fa={class:"pc-title"},Ca={class:"pct-info"},_a=L(" 参数详情 "),Na={class:"pc-content"},ka={class:"param-item"},Va={class:"param-value"},Ta={class:"param-name"},Sa=L(" 上报节点 "),xa=L(" 寄存器详情 "),Da=L("编辑"),Ra=L("删除"),Ma=ga((()=>x("div",null,"无数据",-1))),Ia={class:"pagination"},La={class:"dialog-content"},Aa=L("单位秒"),Ua=L("同步SN"),Pa=L("单位秒"),ja=L(" 线圈状态寄存器 "),za=L(" 离散输入状态寄存器 "),Ba=L(" 保持寄存器 "),Ga=L(" 输入寄存器 "),qa={class:"dialog-footer"},Ka=L("取消"),Oa=L("保存");var Ea=E({setup(e){const c=Q();console.log("window.location",window.location);const s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,p=/^(?=^.{3,255}$)(http(s)?:\/\/)?(www\.)?[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:\d+)*(\/\w+\.\w+)*$/,v=/^[0-9]*[1-9][0-9]*$/,k=(e,a,l)=>{0===a||v.test(a)?l():l(new Error("只能输入自然数！"))},P=_(null),B=C({headerCellStyle:{background:H.primaryColor,color:H.fontWhiteColor,height:"54px"},cellStyle:{height:"48px"},tableMaxHeight:0,currentPage:1,pagesize:20,dataServiceName:"",gatewayTableData:[],dFlag:!1,dTitle:"添加上报服务",networkNames:[],gatewayForm:{serviceName:"",ip:"",port:"",reportTime:0,protocol:"",userName:"",password:"",clientID:"",keepAlive:"",cleanSession:!1,deviceName:"",projectCode:"",token:"",slaveID:0,coilStatusRegStart:0,coilStatusRegCnt:0,inputStatusRegStart:0,inputStatusRegCnt:0,holdingRegStart:0,holdingRegCnt:0,inputRegStart:0,inputRegCnt:0,appKey:"",productKey:"",deviceID:"",deviceSecret:""},paramName:{serviceName:"服务名称",ip:"服务名称",port:"服务名称",reportTime:"上报时间",protocol:"协议名称",userName:"用户名",password:"密码",clientID:"客户端名称",keepAlive:"保活时间",cleanSession:"是否清除会话",deviceName:"通信编码",projectCode:"项目编码",token:"密钥",appKey:"appKey",productKey:"产品密钥",deviceID:"通讯地址",deviceSecret:"设备密钥"},gatewayRules:{serviceName:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],ip:[{required:!0,validator:(e,a,l)=>{console.log("validateIP"),s.test(a)||p.test(a)?l():l(new Error("格式错误！"))},trigger:"blur"}],port:[{required:!0,message:"端口不能为空",trigger:"blur"}],reportTime:[{required:!0,message:"上报时间不能为空",trigger:"blur"},{type:"number",message:"上报时间只能输入数字"}],protocol:[{required:!0,message:"协议名称不能为空",trigger:"blur"}],userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}],clientID:[{required:!0,message:"客户端名称不能为空",trigger:"blur"}],keepAlive:[{required:!0,message:"保活时间不能为空",trigger:"blur"}],deviceName:[{required:!0,message:"通讯编码不能为空",trigger:"blur"}],projectCode:[{required:!0,message:"项目编码不能为空",trigger:"blur"}],token:[{required:!0,message:"密钥不能为空",trigger:"blur"}],cleanSession:[{required:!0,message:"清除会话不能为空",trigger:"blur"}],slaveID:[{required:!0,message:"从机ID不能为空",trigger:"blur"},{validator:k,trigger:"blur"}],coilStatusRegStart:[{validator:k,trigger:"blur"}],coilStatusRegCnt:[{validator:k,trigger:"blur"}],inputStatusRegStart:[{validator:k,trigger:"blur"}],inputStatusRegCnt:[{validator:k,trigger:"blur"}],holdingRegStart:[{validator:k,trigger:"blur"}],holdingRegCnt:[{validator:k,trigger:"blur"}],inputRegStart:[{validator:k,trigger:"blur"}],inputRegCnt:[{validator:k,trigger:"blur"}],appKey:[{required:!0,message:"appKey不能为空",trigger:"blur"}],productKey:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}],deviceID:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}],deviceSecret:[{required:!0,message:"产品密钥不能为空",trigger:"blur"}]},protocolOptions:[{name:"EMQX.MQTT",label:"EMQX.MQTT"},{name:"RT.STLV1",label:"RT.STLV1"},{name:"RT.STLV2",label:"RT.STLV2"},{name:"RT.MQTT",label:"RT.MQTT"},{name:"ModbusTCP",label:"ModbusTCP"},{name:"FSJY.MQTT",label:"FSJY.MQTT"}],dnList:["RT.STLV1","RT.STLV2"],kaList:["EMQX.MQTT","RT.MQTT","RT.STLV2","FSJY.MQTT"],dnFlag:1}),G=e=>{const l={token:c.token,data:{}};J.getGatewayList(l).then((async l=>{console.log("getGatewayList -> res",l),l&&("0"===l.code?(B.gatewayTableData=l.data,1===e&&a({type:"success",message:"刷新成功！"})):re(l),await q((()=>{B.tableMaxHeight=P.value.clientHeight-34-36-22})))}))};G();(()=>{const e={token:c.token,data:{}};J.getReportProtocolList(e).then((e=>{e&&(console.log("getReportProtocolList -> res",e),"0"===e.code?B.protocolOptions=e.data:re(e))}))})();const E=N((()=>B.gatewayTableData.filter((e=>!B.dataServiceName||e.serviceName.toLowerCase().includes(B.dataServiceName.toLowerCase()))).slice((B.currentPage-1)*B.pagesize,B.currentPage*B.pagesize))),Y=N((()=>B.gatewayTableData.filter((e=>!B.dataServiceName||e.serviceName.toLowerCase().includes(B.dataServiceName.toLowerCase()))))),$=e=>{B.currentPage=e},X=e=>{B.pagesize=e},W=e=>{B.dFlag=!0,B.dTitle="编辑上报服务",B.gatewayForm={serviceName:e.serviceName,ip:e.ip,port:e.port,reportTime:e.reportTime,protocol:e.protocol},e.protocol.includes("FSJY.MQTT")?(B.gatewayForm.userName=e.param.UserName,B.gatewayForm.password=e.param.Password,B.gatewayForm.clientID=e.param.ClientID,B.gatewayForm.keepAlive=e.param.KeepAlive,B.gatewayForm.cleanSession=e.param.CleanSession,B.gatewayForm.appKey=e.param.AppKey,B.gatewayForm.productKey=e.param.ProductKey,B.gatewayForm.deviceID=e.param.DeviceID,B.gatewayForm.deviceSecret=e.param.DeviceSecret):e.protocol.includes("MQTT")?(B.gatewayForm.userName=e.param.userName,B.gatewayForm.password=e.param.password,B.gatewayForm.clientID=e.param.clientID,B.gatewayForm.keepAlive=e.param.keepAlive,B.gatewayForm.cleanSession=e.param.cleanSession):"RT.STLV1"===e.protocol?B.gatewayForm.deviceName=e.param.deviceName:"RT.STLV2"===e.protocol?(B.gatewayForm.projectCode=e.param.projectCode,B.gatewayForm.deviceName=e.param.deviceName,B.gatewayForm.keepAlive=e.param.keepAlive,B.gatewayForm.token=e.param.token):"ModbusTCP"===e.protocol&&(B.gatewayForm.ip="",B.gatewayForm.reportTime=0,B.gatewayForm.slaveID=e.param.slaveID,B.gatewayForm.coilStatusRegStart=e.param.coilStatusRegStart,B.gatewayForm.coilStatusRegCnt=e.param.coilStatusRegCnt,B.gatewayForm.inputStatusRegStart=e.param.inputStatusRegStart,B.gatewayForm.inputStatusRegCnt=e.param.inputStatusRegCnt,B.gatewayForm.holdingRegStart=e.param.holdingRegStart,B.gatewayForm.holdingRegCnt=e.param.holdingRegCnt,B.gatewayForm.inputRegStart=e.param.inputRegStart,B.gatewayForm.inputRegCnt=e.param.inputRegCnt)},ee=()=>{B.dnFlag=1},ae=_(null),te=()=>{B.dFlag=!1,ae.value.resetFields(),B.gatewayForm={serviceName:"",ip:"",port:"",reportTime:0,protocol:"",userName:"",password:"",clientID:"",keepAlive:"",cleanSession:!1,deviceName:"",projectCode:"",token:"",appKey:"",productKey:"",deviceID:"",deviceSecret:""}},oe=e=>{te()},re=e=>{a({type:"error",message:e.message})},de=(e,l)=>{a({type:"0"===e.code?"success":"error",message:e.message}),"0"===e.code&&l&&l()};return(e,s)=>{const p=t,v=r,C=V("Icon"),_=o,N=d,k=b,q=w,Q=n,H=i,ne=m,ie=g,ce=y,se=h,pe=F,ue=f,me=u;return T(),S("div",ya,[1===M(B).dnFlag?(T(),S("div",fa,[x("div",va,[D(v,{style:{width:"200px"},placeholder:"请输入上报服务名称",clearable:"",modelValue:M(B).dataServiceName,"onUpdate:modelValue":s[0]||(s[0]=e=>M(B).dataServiceName=e)},{prefix:R((()=>[D(p,{class:"el-input__icon"},{default:R((()=>[D(M(Z))])),_:1})])),_:1},8,["modelValue"]),x("div",null,[D(_,{type:"primary",bg:"",class:"right-btn",onClick:s[1]||(s[1]=e=>(B.dFlag=!0,void(B.dTitle="添加上报服务")))},{default:R((()=>[D(p,{class:"btn-icon"},{default:R((()=>[D(C,{name:"local-add",size:"14px",color:"#ffffff"})])),_:1}),ba])),_:1}),D(_,{style:{color:"#fff"},color:"#2EA554",class:"right-btn",onClick:s[2]||(s[2]=e=>{G(1)})},{default:R((()=>[D(p,{class:"btn-icon"},{default:R((()=>[D(C,{name:"local-refresh",size:"14px",color:"#ffffff"})])),_:1}),wa])),_:1})])]),x("div",{class:"content",ref_key:"contentRef",ref:P},[D(Q,{data:M(E),"cell-style":M(B).cellStyle,"header-cell-style":M(B).headerCellStyle,"max-height":M(B).tableMaxHeight,style:{width:"100%"},stripe:"",onRowDblclick:W},{empty:R((()=>[Ma])),default:R((()=>[D(N,{prop:"serviceName",label:"服务名称",width:"auto","min-width":"150",align:"center"}),D(N,{prop:"protocol",label:"协议名称",width:"auto","min-width":"150",align:"center"}),D(N,{prop:"ip",label:"上报地址",width:"auto","min-width":"150",align:"center"}),D(N,{prop:"port",label:"上报端口",width:"auto","min-width":"100",align:"center"}),D(N,{prop:"reportTime",label:"上报周期（秒）",width:"auto","min-width":"150",align:"center"}),D(N,{label:"在线状态",width:"auto","min-width":"100",align:"center"},{default:R((e=>[L(I("onLine"===e.row.reportStatus?"在线":"离线"),1)])),_:1}),D(N,{label:"参数详情",width:"auto","min-width":"500",align:"center"},{default:R((e=>[D(q,{trigger:"hover","show-after":500,"auto-close":500,effect:"light",width:"auto"},{default:R((()=>[x("div",ha,[x("div",Fa,[x("div",Ca,[x("b",null,I(e.row.serviceName),1),_a])]),x("div",Na,[(T(!0),S(A,null,U(e.row.param,((e,a,l)=>(T(),S("div",ka,[x("div",Va,I(M(B).paramName[a])+"：",1),x("div",Ta,I("cleanSession"===a?e?"是":"否":e),1)])))),256))])])])),reference:R((()=>[D(k,{size:"large"},{default:R((()=>[L(I(e.row.param),1)])),_:2},1024)])),_:2},1024)])),_:1}),D(N,{label:"操作",width:"auto","min-width":"200",align:"center",fixed:"right"},{default:R((e=>["ModbusTCP"!==e.row.protocol?(T(),j(_,{key:0,onClick:a=>{return l=e.row,B.dnFlag=2,void(B.curGateway=l);var l},text:"",type:"success"},{default:R((()=>[Sa])),_:2},1032,["onClick"])):z("",!0),"ModbusTCP"==e.row.protocol?(T(),j(_,{key:1,onClick:a=>{return l=e.row,B.dnFlag=3,void(B.curGateway=l);var l},text:"",type:"success"},{default:R((()=>[xa])),_:2},1032,["onClick"])):z("",!0),D(_,{onClick:a=>W(e.row),text:"",type:"primary"},{default:R((()=>[Da])),_:2},1032,["onClick"]),D(_,{onClick:t=>{return o=e.row,void l.confirm("确定要删除这个上报服务吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{const e={token:c.token,data:{serviceName:o.serviceName}};J.deleteGateway(e).then((e=>{de(e,G)}))})).catch((()=>{a({type:"info",message:"取消删除"})}));var o},text:"",type:"danger"},{default:R((()=>[Ra])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","cell-style","header-cell-style","max-height"]),x("div",Ia,[D(H,{"current-page":M(B).currentPage,"page-size":M(B).pagesize,"page-sizes":[20,50,200,500],total:M(Y).length,onCurrentChange:$,onSizeChange:X,background:"",layout:"total, sizes, prev, pager, next, jumper",style:{"margin-top":"46px"}},null,8,["current-page","page-size","total"])])],512)])):z("",!0),2===M(B).dnFlag?(T(),j(Be,{key:1,curGateway:M(B).curGateway,onChangeDnFlag:s[3]||(s[3]=e=>ee())},null,8,["curGateway"])):z("",!0),3===M(B).dnFlag?(T(),j(ma,{key:2,curGateway:M(B).curGateway,onChangeDnFlag:s[4]||(s[4]=e=>ee())},null,8,["curGateway"])):z("",!0),D(me,{modelValue:M(B).dFlag,"onUpdate:modelValue":s[35]||(s[35]=e=>M(B).dFlag=e),title:M(B).dTitle,width:"600px","before-close":oe,"close-on-click-modal":!1},{footer:R((()=>[x("span",qa,[D(_,{onClick:s[33]||(s[33]=e=>te())},{default:R((()=>[Ka])),_:1}),D(_,{type:"primary",onClick:s[34]||(s[34]=e=>{ae.value.validate((e=>{if(!e)return!1;{const e={serviceName:B.gatewayForm.serviceName,ip:B.gatewayForm.ip,port:B.gatewayForm.port,reportTime:B.gatewayForm.reportTime,protocol:B.gatewayForm.protocol,param:{}};let a={};B.gatewayForm.protocol.includes("FSJY.MQTT")?(a.userName=B.gatewayForm.userName,a.password=B.gatewayForm.password,a.clientID=B.gatewayForm.clientID,a.keepAlive=B.gatewayForm.keepAlive,a.cleanSession=B.gatewayForm.cleanSession,a.appKey=B.gatewayForm.appKey,a.productKey=B.gatewayForm.productKey,a.deviceID=B.gatewayForm.deviceID,a.deviceSecret=B.gatewayForm.deviceSecret):B.gatewayForm.protocol.includes("MQTT")?(a.userName=B.gatewayForm.userName,a.password=B.gatewayForm.password,a.clientID=B.gatewayForm.clientID,a.keepAlive=B.gatewayForm.keepAlive,a.cleanSession=B.gatewayForm.cleanSession):"RT.STLV1"===B.gatewayForm.protocol?a.deviceName=B.gatewayForm.deviceName:"RT.STLV2"===B.gatewayForm.protocol?(a.projectCode=B.gatewayForm.projectCode,a.deviceName=B.gatewayForm.deviceName,a.keepAlive=B.gatewayForm.keepAlive,a.token=B.gatewayForm.token):"ModbusTCP"===B.gatewayForm.protocol&&(a.slaveID=B.gatewayForm.slaveID,a.coilStatusRegStart=B.gatewayForm.coilStatusRegStart,a.coilStatusRegCnt=B.gatewayForm.coilStatusRegCnt,a.inputStatusRegStart=B.gatewayForm.inputStatusRegStart,a.inputStatusRegCnt=B.gatewayForm.inputStatusRegCnt,a.holdingRegStart=B.gatewayForm.holdingRegStart,a.holdingRegCnt=B.gatewayForm.holdingRegCnt,a.inputRegStart=B.gatewayForm.inputRegStart,a.inputRegCnt=B.gatewayForm.inputRegCnt),e.param=a;const l={token:c.token,data:e};B.dTitle.includes("添加")?J.addGateway(l).then((e=>{de(e,G),te()})):J.editGateway(l).then((e=>{de(e,G),te()}))}}))})},{default:R((()=>[Oa])),_:1})])])),default:R((()=>[x("div",La,[D(ue,{model:M(B).gatewayForm,rules:M(B).gatewayRules,ref_key:"gatewayFormRef",ref:ae,"status-icon":"","label-position":"right","label-width":"120px",style:{height:"450px"}},{default:R((()=>[D(ne,{label:"服务名称",prop:"serviceName"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.serviceName,"onUpdate:modelValue":s[5]||(s[5]=e=>M(B).gatewayForm.serviceName=e),autocomplete:"off",placeholder:"请输入服务名称"},null,8,["modelValue"])])),_:1}),D(ne,{label:"协议类型",prop:"protocol"},{default:R((()=>[D(ce,{modelValue:M(B).gatewayForm.protocol,"onUpdate:modelValue":s[6]||(s[6]=e=>M(B).gatewayForm.protocol=e),onChange:s[7]||(s[7]=e=>{"RT.MQTT"===M(B).gatewayForm.protocol&&(B.gatewayForm.ip="mqtt.reatgreen.com",B.gatewayForm.port="1883",B.gatewayForm.userName="reatgreen",B.gatewayForm.password="Reat@2022",B.gatewayForm.reportTime=900,B.gatewayForm.keepAlive="30",B.gatewayForm.cleanSession=!0)}),style:{width:"100%"},placeholder:"请选择协议类型"},{default:R((()=>[(T(!0),S(A,null,U(M(B).protocolOptions,(e=>(T(),j(ie,{key:"protocol"+e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),K(D(ne,{label:"上报地址",prop:"ModbusTCP"!==M(B).gatewayForm.protocol?e.ip:""},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.ip,"onUpdate:modelValue":s[8]||(s[8]=e=>M(B).gatewayForm.ip=e),autocomplete:"off",placeholder:"请输入上报地址"},null,8,["modelValue"])])),_:1},8,["prop"]),[[O,"ModbusTCP"!==M(B).gatewayForm.protocol]]),D(ne,{label:"上报端口",prop:"port"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.port,"onUpdate:modelValue":s[9]||(s[9]=e=>M(B).gatewayForm.port=e),autocomplete:"off",placeholder:"请输入上报端口"},null,8,["modelValue"])])),_:1}),K(D(ne,{label:"上报周期",prop:"ModbusTCP"!==M(B).gatewayForm.protocol?"reportTime":""},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.reportTime,"onUpdate:modelValue":s[10]||(s[10]=e=>M(B).gatewayForm.reportTime=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入上报周期"},{append:R((()=>[Aa])),_:1},8,["modelValue"])])),_:1},8,["prop"]),[[O,"ModbusTCP"!==M(B).gatewayForm.protocol]]),M(B).gatewayForm.protocol.includes("MQTT")?(T(),j(ne,{key:0,label:"用户名",prop:"userName"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.userName,"onUpdate:modelValue":s[11]||(s[11]=e=>M(B).gatewayForm.userName=e),autocomplete:"off",placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("MQTT")?(T(),j(ne,{key:1,label:"密码",prop:"password"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.password,"onUpdate:modelValue":s[12]||(s[12]=e=>M(B).gatewayForm.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("MQTT")?(T(),j(ne,{key:2,label:"客户端名称",prop:"clientID"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.clientID,"onUpdate:modelValue":s[14]||(s[14]=e=>M(B).gatewayForm.clientID=e),autocomplete:"off",placeholder:"请输入客户端名称"},{append:R((()=>[D(_,{onClick:s[13]||(s[13]=e=>(()=>{const e={token:c.token,data:{}};le.getGatewaySN(e).then((e=>{"0"===e.code?B.gatewayForm.clientID=e.data.sn:re(e)}))})())},{default:R((()=>[Ua])),_:1})])),_:1},8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("FSJY")?(T(),j(ne,{key:3,label:"APP-KEY",prop:"appKey"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.appKey,"onUpdate:modelValue":s[15]||(s[15]=e=>M(B).gatewayForm.appKey=e),autocomplete:"off",placeholder:"请输入appKey"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("FSJY")?(T(),j(ne,{key:4,label:"产品密钥",prop:"productKey"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.productKey,"onUpdate:modelValue":s[16]||(s[16]=e=>M(B).gatewayForm.productKey=e),autocomplete:"off",placeholder:"请输入网关产品密钥"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("FSJY")?(T(),j(ne,{key:5,label:"通讯地址",prop:"deviceID"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.deviceID,"onUpdate:modelValue":s[17]||(s[17]=e=>M(B).gatewayForm.deviceID=e),autocomplete:"off",placeholder:"请输入网关通讯地址"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("FSJY")?(T(),j(ne,{key:6,label:"设备密钥",prop:"deviceSecret"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.deviceSecret,"onUpdate:modelValue":s[18]||(s[18]=e=>M(B).gatewayForm.deviceSecret=e),autocomplete:"off",placeholder:"请输入网关设备密钥"},null,8,["modelValue"])])),_:1})):z("",!0),"RT.STLV2"===M(B).gatewayForm.protocol?(T(),j(ne,{key:7,label:"项目编码",prop:"projectCode"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.projectCode,"onUpdate:modelValue":s[19]||(s[19]=e=>M(B).gatewayForm.projectCode=e),autocomplete:"off",placeholder:"请输入项目编码"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).dnList.includes(M(B).gatewayForm.protocol)?(T(),j(ne,{key:8,label:"通信编码",prop:"deviceName"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.deviceName,"onUpdate:modelValue":s[20]||(s[20]=e=>M(B).gatewayForm.deviceName=e),autocomplete:"off",placeholder:"请输入通信编码"},null,8,["modelValue"])])),_:1})):z("",!0),M(B).kaList.includes(M(B).gatewayForm.protocol)?(T(),j(ne,{key:9,label:"保活时间",prop:"keepAlive"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.keepAlive,"onUpdate:modelValue":s[21]||(s[21]=e=>M(B).gatewayForm.keepAlive=e),autocomplete:"off",placeholder:"请输入保活时间"},{append:R((()=>[Pa])),_:1},8,["modelValue"])])),_:1})):z("",!0),M(B).gatewayForm.protocol.includes("MQTT")?(T(),j(ne,{key:10,label:"是否清除会话",prop:"cleanSession"},{default:R((()=>[D(se,{modelValue:M(B).gatewayForm.cleanSession,"onUpdate:modelValue":s[22]||(s[22]=e=>M(B).gatewayForm.cleanSession=e),"inline-prompt":"","active-text":"是","inactive-text":"否"},null,8,["modelValue"])])),_:1})):z("",!0),"RT.STLV2"===M(B).gatewayForm.protocol?(T(),j(ne,{key:11,label:"秘钥",prop:"token"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.token,"onUpdate:modelValue":s[23]||(s[23]=e=>M(B).gatewayForm.token=e),autocomplete:"off",placeholder:"请输入秘钥"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:12,label:"从机ID",prop:"slaveID"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.slaveID,"onUpdate:modelValue":s[24]||(s[24]=e=>M(B).gatewayForm.slaveID=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入从机ID"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(pe,{key:13,"content-position":"center"},{default:R((()=>[ja])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:14,label:"起始地址",prop:"coilStatusRegStart"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.coilStatusRegStart,"onUpdate:modelValue":s[25]||(s[25]=e=>M(B).gatewayForm.coilStatusRegStart=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入线圈状态寄存器起始地址"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:15,label:"数量",prop:"coilStatusRegCnt"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.coilStatusRegCnt,"onUpdate:modelValue":s[26]||(s[26]=e=>M(B).gatewayForm.coilStatusRegCnt=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入线圈状态寄存器数量"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(pe,{key:16,"content-position":"center"},{default:R((()=>[za])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:17,label:"起始地址",prop:"inputStatusRegStart"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.inputStatusRegStart,"onUpdate:modelValue":s[27]||(s[27]=e=>M(B).gatewayForm.inputStatusRegStart=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入离散输入状态寄存器起始地址"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:18,label:"数量",prop:"inputStatusRegCnt"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.inputStatusRegCnt,"onUpdate:modelValue":s[28]||(s[28]=e=>M(B).gatewayForm.inputStatusRegCnt=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入离散输入状态寄存器数量"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(pe,{key:19,"content-position":"center"},{default:R((()=>[Ba])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:20,label:"起始地址",prop:"holdingRegStart"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.holdingRegStart,"onUpdate:modelValue":s[29]||(s[29]=e=>M(B).gatewayForm.holdingRegStart=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入保持寄存器起始地址"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:21,label:"数量",prop:"holdingRegCnt"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.holdingRegCnt,"onUpdate:modelValue":s[30]||(s[30]=e=>M(B).gatewayForm.holdingRegCnt=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入保持寄存器数量"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(pe,{key:22,"content-position":"center"},{default:R((()=>[Ga])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:23,label:"起始地址",prop:"inputRegStart"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.inputRegStart,"onUpdate:modelValue":s[31]||(s[31]=e=>M(B).gatewayForm.inputRegStart=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入输入寄存器起始地址"},null,8,["modelValue"])])),_:1})):z("",!0),"ModbusTCP"===M(B).gatewayForm.protocol?(T(),j(ne,{key:24,label:"数量",prop:"inputRegCnt"},{default:R((()=>[D(v,{type:"text",modelValue:M(B).gatewayForm.inputRegCnt,"onUpdate:modelValue":s[32]||(s[32]=e=>M(B).gatewayForm.inputRegCnt=e),modelModifiers:{number:!0},autocomplete:"off",placeholder:"请输入输入寄存器数量"},null,8,["modelValue"])])),_:1})):z("",!0)])),_:1},8,["model","rules"])])])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-06e6a1ac"]]);export{Ea as default};
