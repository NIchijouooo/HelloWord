import{m as e,v as a,w as t,S as s,p as l,F as r,G as o,u as d,g as c}from"./element-plus.64650d13.js";import{_ as i,u as n}from"./index.98f42e56.js";import{S as u}from"./sysTool.0aa1cd13.js";import{I as m}from"./interface.c4e57716.js";import{Y as p,o as f,c as v,a as h,S as g,Q as b,u as j,L as y,M as k,af as _,at as x,au as C,a0 as D,U as V,O as I,P as w}from"./@vue.5db09832.js";import"./@vueuse.af8df401.js";import"./dayjs.b9b14681.js";import"./axios.765908e4.js";import"./lodash-es.8ca9079f.js";import"./@element-plus.aa3ef65f.js";import"./async-validator.ed4c92a2.js";import"./@ctrl.82a509e0.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.d969f71f.js";import"./pinia.69c74452.js";import"./vue-demi.b3a9cad9.js";import"./screenfull.258ac312.js";import"./vue-echarts.8f00425b.js";import"./resize-detector.4e96b72b.js";import"./echarts.62a08783.js";import"./zrender.56caf4f2.js";import"./tslib.60310f1a.js";import"./nprogress.aae2b787.js";const T={class:"main-container"},L={class:"main",style:{"background-color":"inherit"}},U=(e=>(x("data-v-26fe9234"),e=e(),C(),e))((()=>h("div",{class:"card-header"},[h("span",null,"通讯调试助手")],-1))),S={class:"item"},A={class:"st-receive"},N={class:"str-content"},z={key:0,class:"str-noData"},F={key:0},M={class:"st-send"},O={class:"st-operate"},R={style:{"margin-bottom":"10px"}},P=D("清空显示区"),E=D(" 发送 "),G=D("清空发送区"),Q={class:"st-remark"},Y=D("操作步骤:"),$=D("1、选择采集接口"),q=D("2、选择校验方式"),B=D("3、发送区编写发送的报文"),H=D("4、显示区显示发送的报文和返回的报文");var J=i({setup(i){const x=n(),C=p({receiveData:[],sendData:"",curCollect:"",interfaceList:[{name:"collect01",label:"采集接口01"},{name:"modbusTCP",label:"采集接口02"}],receiveTime:!0,curCheck:0,checkOptions:[{name:0,label:"不校验"},{name:1,label:"CRC16"},{name:2,label:"SUM"}]});(()=>{const e={token:x.token,data:{}};m.getInterfaceList(e).then((e=>{console.log("getInterfaceList -> res",e),e&&("0"===e.code?C.interfaceList=e.data:D(e))}))})();const D=e=>{c({type:"error",message:e.message})};return(c,i)=>{const n=e,m=a,p=t,J=s,K=l,W=r,X=o,Z=d;return f(),v("div",T,[h("div",L,[g(X,{gutter:20,style:{height:"100%"}},{default:b((()=>[g(W,{span:12},{default:b((()=>[g(Z,{class:"box-card",shadow:"hover"},{header:b((()=>[U])),default:b((()=>[h("div",S,[h("div",A,[h("div",N,[0==j(C).receiveData.length?(f(),v("div",z,"显示区")):y("",!0),(f(!0),v(k,null,_(j(C).receiveData,((e,a)=>(f(),v("div",null,[j(C).receiveTime?(f(),v("div",F,"【"+V(e.date)+"】",1)):y("",!0),h("div",{class:I(1==e.type?"TxInfo":"RxInfo")},V(1==e.type?"Tx："+e.data:"Rx："+e.data),3)])))),256))])]),h("div",M,[g(n,{modelValue:j(C).sendData,"onUpdate:modelValue":i[0]||(i[0]=e=>j(C).sendData=e),class:"sts-sendArea",rows:"5",type:"textarea",placeholder:""==j(C).sendData?"发送区":""},null,8,["modelValue","placeholder"])]),h("div",O,[h("div",null,[g(p,{modelValue:j(C).curCollect,"onUpdate:modelValue":i[1]||(i[1]=e=>j(C).curCollect=e),style:{"margin-bottom":"10px"},placeholder:"请选择采集接口"},{default:b((()=>[(f(!0),v(k,null,_(j(C).interfaceList,(e=>(f(),w(m,{key:e.collInterfaceName,label:e.collInterfaceName,value:e.collInterfaceName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),h("div",R,[g(J,{modelValue:j(C).receiveTime,"onUpdate:modelValue":i[2]||(i[2]=e=>j(C).receiveTime=e),label:"接收时间",border:"",style:{width:"100%",height:"34px"}},null,8,["modelValue"])]),g(K,{type:"danger",style:{height:"34px",width:"100%"},plain:"",onClick:i[3]||(i[3]=e=>{C.receiveData=[]})},{default:b((()=>[P])),_:1})]),h("div",null,[g(K,{type:"primary",style:{height:"34px",width:"100%","margin-bottom":"10px"},plain:"",onClick:i[4]||(i[4]=e=>(()=>{if(""===C.curCollect)return void D({message:"请选择采集接口！"});if(""===C.curCheck)return void D({message:"请选择校验方式！"});let e="";if(""===C.sendData)return void D({message:"发送数据不能为空！"});let a=C.sendData.replaceAll(" ","");if(!/^[0-9a-fA-F]+$/.test(a))return D({message:"报文格式错误，只能输入字符【0-9,a-f,A-F或者空格】！"}),C.sendData="",void(a="");const t=a.length;for(var s=0;s<t;s+=2)s<t&&(e+=a.substr(s,2)+(s+2>=t?"":" "));const l={token:x.token,data:{collInterfaceName:C.curCollect,directData:e,checkSum:C.curCheck}};u.sendMessage(l).then((e=>{"0"===e.code?e.data.forEach((e=>{C.receiveData.push(e)})):D(e)}))})())},{default:b((()=>[E])),_:1}),g(p,{modelValue:j(C).curCheck,"onUpdate:modelValue":i[5]||(i[5]=e=>j(C).curCheck=e),style:{"margin-bottom":"10px"},placeholder:"请选择数据校验"},{default:b((()=>[(f(!0),v(k,null,_(j(C).checkOptions,(e=>(f(),w(m,{key:e.name,label:e.label,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),g(K,{type:"danger",style:{height:"34px",width:"100%"},plain:"",onClick:i[6]||(i[6]=e=>{C.sendData=""})},{default:b((()=>[G])),_:1})])]),h("div",Q,[g(X,{gutter:16},{default:b((()=>[g(W,{span:3},{default:b((()=>[Y])),_:1}),g(W,{span:21},{default:b((()=>[$])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[q])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[B])),_:1})])),_:1}),g(X,{gutter:16},{default:b((()=>[g(W,{offset:3,span:21},{default:b((()=>[H])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1})])])}}},[["__scopeId","data-v-26fe9234"]]);export{J as default};
